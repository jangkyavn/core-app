"use strict";var BaseController={initialize:function(){var n=window.location.href;$(".nav-item a").each(function(){n.indexOf($(this).attr("href"))>=0&&($(this).parent("li").removeClass("nav-item"),$(this).parent("li").addClass("active"))});$(".menu-content a.menu-item").each(function(){n.indexOf($(this).attr("href"))>=0&&($(this).parent("li").addClass("active"),$(this).closest("li.nav-item").addClass("open"))});BaseController.loadData();setInterval(function(){BaseController.loadData()},18e4);BaseController.registerEvents()},registerEvents:function(){$("#announcementContent").scroll(function(){Math.round($(this).scrollTop()+$(this).innerHeight(),10)>=Math.round($(this)[0].scrollHeight,10)&&(core.configs.pageIndex+=1,BaseController.loadData())});$("body").on("click",".btn-detail-announcement",function(){var n=$(this).data("id");core.callAjax("/Admin/Announcement/MaskAsRead","POST",{id:n},"json",function(n){n&&(window.location.href="/Admin/Announcement/Index")})})},loadData:function(){core.callAjax("/Admin/Announcement/GetAllPaging","GET",{page:core.configs.pageIndex,pageSize:core.configs.pageSize},"json",function(n){var t=n.Data,i="",r=$("#announcementTemplate").html();t.RowCount>0?($.each(t.Results,function(n,t){i+=Mustache.render(r,{Id:t.Id,Title:t.Title,Content:t.Content,FullName:t.FullName,Avatar:t.Avatar,Period:core.getPeriod(t.DateCreated),HasRead:t.HasRead===!0?"text-muted":"text-primary",HasReadName:t.HasRead===!0?"":"text-success"})}),$("#lblAnnouncementTotal").show(),$("#lblAnnouncementTotal").text(n.UnreadTotal),$("#announcementContent").append(i),$("#announcementFooter").show()):($("#lblAnnouncementTotal").hide(),$("#announcementContent").html('<div style="text-align: center; margin: 1rem 0 1rem 0;">Không có thông báo<\/div>'),$("#announcementFooter").hide())})}};BaseController.initialize();